_borschik("CdfAb")&&(window.MOUSE_TRACKING=function(){function t(t){return function(){try{return t.apply(this,arguments)}catch(t){t.message="Mouse tracking: "+t.message,window.logSerpJsError(t)}}}function e(e,n){return window.setTimeout(t(e),n)}function n(e,n){return window.setInterval(t(e),n)}var i=$(window),r=$(document),s=$.extend({ATTENTION_MIN_DURATION:1e3,ATTENTION_MAX_INTERRUPT:6e4,VIEWPORT_CHANGE_TIMEOUT:500,REQID_CHECK_INTERVAL:1e3,ALIVE_PACKET_ENABLED:!0,ALIVE_PACKET_INTERVAL:3e3,SENDER_MAX_REQUEST_COUNT:60,SENDER_MAX_PACKET_SIZE:1e3,SENDER_REQUEST_INTERVAL:1e4,SENDER_REQUEST_CACHE_TIMEOUT:3e4,COORDINATES_SCALE:1,MOUSEMOVE_LOG:1},window.MOUSE_TRACKING_SETTINGS||{});i.one("load",t(function(){function o(){return(new Date).getTime()}function u(){return Math.round((o()-g)/_)}function a(t,e){t.push(255&e)}function h(t,e){for(e=Math.max(0,0|e);e>127;)t.push(127&e|128),e>>=7;t.push(e)}function c(t,e){if(!e)return void window.logSerpJsError("Mouse tracking: empty baobabId in encodeASCIIString");for(var n=!1,i=0,r=e.length;i<r;i++){var s=e.charCodeAt(i);s<128?t.push(s):n=!0}if(n){var o=new Error("Mouse tracking: baobabId must be US-ASCII");o.additional={baobabId:e},window.logSerpJsError(o)}t.push(0)}function d(t){try{return window.BEM&&BEM.blocks["i-global"].param(t)}catch(t){return""}}function l(t){return Math.floor(t*s.COORDINATES_SCALE)}function E(t){var e=[];return a(e,t),h(e,u()),e}var _=50,f=10,g=o(),p=103,m=105,T=106,S=107,b=108,I=109,A=110,w={attention:function(t,e,n){var i=[];return a(i,A),h(i,t),h(i,e),c(i,n),i},serpItem:function(t,e,n){t=$(t);var i=[],r=t.offset();return c(i,e),h(i,n),h(i,l(r.left)),h(i,l(r.top)),h(i,l(t.outerWidth())),h(i,l(t.outerHeight())),i},serpItems:function(t,e,n){var i=[];a(i,b),h(i,u()),h(i,t),h(i,e),h(i,n.length);for(var r=0,s=n.length;r<s;r++){var o=n[r][1];if(o)$.merge(i,w.serpItem(n[r][0],o,n[r][2]));else{var c=n[r][0];window.logSerpJsError("Mouse tracking: element with empty blockId {cid:"+c.getAttribute("data-cid")+", log-node:"+c.getAttribute("data-log-node")+"}")}}return i},viewport:function(t){var e=[];return a(e,p),h(e,u()),h(e,l(t[0])),h(e,l(t[1])),h(e,l(t[2])),h(e,l(t[3])),e},mouseClick:function(t,e,n,i){var r=[];return a(r,I),h(r,u()),h(r,l(t)),h(r,l(e)),c(r,n),h(r,i),r},alive:function(){return E(m)},windowFocus:function(){return E(S)},windowBlur:function(){return E(T)}},v=function(t){$.extend(this,t||{}),this._active=!0,this._timeLast=this.timeStart,this.mouseMove(this.serpItem,this.timeStart)};v.prototype={grabberDom:null,sender:null,serpItem:null,timeStart:0,mouseMove:function(t,e){return this.serpItem&&t===this.serpItem&&(e-this._timeLast)*_<s.ATTENTION_MAX_INTERRUPT?(this._timeLast=e,!0):(this.close(),!1)},close:function(){if(this._active&&(this._active=!1,"undefined"!=typeof this._timeLast&&"undefined"!=typeof this.timeStart&&this.serpItem&&this.sender)){var t=this._timeLast-this.timeStart;if(t*_>s.ATTENTION_MIN_DURATION){var e=this.serpItem.getAttribute("data-log-node");e&&this.sender.enqueue(w.attention,[this.timeStart,t,e])}}}};var N=function(t){this.sender=t,this._pageTimestamp=o(),this.updateDom(),n(this.updateDom.bind(this),s.REQID_CHECK_INTERVAL)};N.prototype={reqid:"",updateDom:$.throttle(function(){var t=d("reqid");this.reqid!==t&&(this.reqid=t,this._grabDOM(),this.grabViewport())}),_grabDOM:function(){this.elements=this._getElements();var t=this.elements.toArray().map(function(t){return[t,t.getAttribute("data-log-node"),0]},this);t.length>0&&this.sender.enqueue(w.serpItems,[_,this._pageTimestamp,t])},_getElements:function(){return $(".serp-list .distr-default-search, .serp-item[data-log-node], .misspell")},grabViewport:$.throttle(function(){var t=[i.scrollLeft(),i.scrollTop(),i.width(),i.height()];this.sender.enqueue(w.viewport,[t])},f)};var R=function(){this._ls=null;try{this._ls=localStorage}catch(t){}};R.prototype={set:function(t,e){if(this.isEnabled())try{!e||$.isArray(e)&&!e.length?this.remove(t):this._ls.setItem(this._getLsKey(t),JSON.stringify(e))}catch(t){}},get:function(t){if(this.isEnabled())try{return JSON.parse(this._ls.getItem(this._getLsKey(t)))}catch(t){}return null},remove:function(t){if(this.isEnabled())try{this._ls.removeItem(this._getLsKey(t))}catch(t){}},isEnabled:function(){return this._ls&&"object"==typeof this._ls&&"object"==typeof JSON},_getLsKey:function(t){return"_mt__"+t}};var M={abc:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789%-_",encode:function(t){for(var e,n=M.abc,i=t.length,r=[],s=i-i%3,o=0;o<s;o+=3)e=(t[o]<<16)+(t[o+1]<<8)+t[o+2],r.push(n[e>>18&63],n[e>>12&63],n[e>>6&63],n[63&e]);switch(i-s){case 1:e=t[s]<<4,r.push(n[e>>6&63],n[63&e],n[64],n[64]);break;case 2:e=(t[s]<<10)+(t[s+1]<<2),r.push(n[e>>12&63],n[e>>6&63],n[63&e],n[64])}return r.join("")}},C=function(t){$.extend(this,t||{}),this._started=!1,this._countRequestSent=this.countRequestSentInit||0,this._packetQueue=this.packetQueueInit||[]};C.prototype={requestsTimeout:s.SENDER_REQUEST_INTERVAL,reqid:"",countRequestSentInit:0,packetQueueInit:null,enqueue:function(t,e){if(this.reqid&&this.hasQuota()&&this._packetQueue.length<s.SENDER_MAX_PACKET_SIZE){var n=t.apply(this,e);if(n)return this._packetQueue.push.apply(this._packetQueue,n),this._dumpToStorage(),this.start(),!0}return!1},flush:function(){if(this.reqid){var t=this._packetQueue.splice(0,s.SENDER_MAX_PACKET_SIZE),e=M.encode(t);window.b(null,{nodeId:Ya.SerpContext.clckId,event:"tech",type:"mousetracking",data:{no:this._countRequestSent+1,blob:e},logHref:d("retpath")}),this._dumpToStorage(),this._countRequestSent++}},start:function(){if(!this._started){this._started=!0;var t=this;e(function(){t.flush(),t._started=!1,t.hasQuota()&&t._packetQueue.length>0&&t.start()},this.requestsTimeout)}},hasQuota:function(){return this._countRequestSent<s.SENDER_MAX_REQUEST_COUNT},_dumpToStorage:$.throttle(function(){if(this.storage&&this.storage.isEnabled()){var t=this.storage.get("data")||{};if(this._packetQueue.length>0){var e=this._packetQueue.slice(0,s.SENDER_MAX_PACKET_SIZE);t[this.reqid]=[e,o(),this._countRequestSent]}else delete t[this.reqid];this.storage.set("data",t)}},f)};var q=function(){this._senders={},this.storage=new R,this.sendAllFromStorage(),e(this.sendAllFromStorage.bind(this),s.SENDER_REQUEST_CACHE_TIMEOUT)};q.prototype={enqueue:function(t,e){var n=d("reqid");return!!n&&("object"!=typeof this._senders[n]&&(this._senders[n]=new C({reqid:n,storage:this.storage})),this._senders[n].enqueue(t,e))},sendAllFromStorage:function(){if(this.storage&&this.storage.isEnabled()){var t=this.storage.get("data")||{},e={};this.storage.set("data",{}),$.each(t,function(t,n){if($.isArray(n)){var i=n[0],r=n[1],u=n[2],a=o()-r;if(!(a<0||u<0||u>=s.SENDER_MAX_REQUEST_COUNT||!$.isArray(i)||i.length<1))if(a>s.SENDER_REQUEST_CACHE_TIMEOUT){var h=new C({reqid:t,requestsTimeout:0,countRequestSentInit:u,packetQueueInit:i});h.flush()}else n[0]=i.slice(0,s.SENDER_MAX_PACKET_SIZE),e[t]=n}}),this.storage.set("data",e)}}};var O=function(){this.grabberAttention=null,this.sender=new q,this.grabberDom=new N(this.sender),s.ALIVE_PACKET_ENABLED&&n(function(){this.sender.enqueue(w.alive)}.bind(this),s.ALIVE_PACKET_INTERVAL)};O.prototype={onMouseMove:function(t){var e=$(t).closest(this.grabberDom.elements).first(),n=u();e&&e.length>0?this.grabberAttention&&this.grabberAttention.mouseMove(e[0],n)||(this.grabberAttention=new v({serpItem:e[0],timeStart:n,sender:this.sender,grabberDom:this.grabberDom})):(this.grabberAttention&&this.grabberAttention.close(),this.grabberAttention=null)},onMouseClick:function(t,e,n,i){var r=$(t).closest(this.grabberDom.elements).first(),s=Ya.SerpContext.clckId;r.length>0&&(s=r.attr("data-log-node")),this.sender.enqueue(w.mouseClick,[e,n,s,i])},onWindowFocus:function(){this.sender.enqueue(w.windowFocus)},onWindowBlur:function(){this.sender.enqueue(w.windowBlur)}};var y=new O;s.MOUSEMOVE_LOG&&r.on("mousemove",$.throttle(t(function(t){y.onMouseMove(t.target)}),f)),r.on("click",t(function(t){y.onMouseClick(t.target,t.pageX,t.pageY,t.which)})),i.on("scroll resize",$.debounce(t(function(){y.grabberDom.grabViewport()}),s.VIEWPORT_CHANGE_TIMEOUT)).on("focus",t(function(){y.onWindowFocus()})).on("blur",t(function(){y.onWindowBlur()}))}))},window.$&&$.throttle&&window.BEM&&window.w?MOUSE_TRACKING():window.Ya&&Ya.define?Ya.define("mouse-tracking",["jquery","BEM"],MOUSE_TRACKING):!function(){function t(){var t,e=[],n=document.getElementsByTagName("script");for(t=0;t<n.length;t++){var i=n[t],r=i.src,s=i.id,o={};r&&(o.src=r),s&&(o.id=s),e.push(o)}return e}if(window.logSerpJsError){var e=new Error("Mouse tracking requires global $ and BEM, or Ya.define");e.additional={scripts:t()},logSerpJsError(e)}}());